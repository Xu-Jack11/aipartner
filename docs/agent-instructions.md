# Agent 开发指令

## 目标概述
- 交付「AI 学习搭子」Web 应用，面向中文用户，提供课程管理、任务跟踪与 AI 助手能力。
- 保持暗色主题、响应式设计、良好的可访问性。
- 优先保障核心功能（课程、任务、AI 对话）可用，再逐步扩展。

## 关键里程碑对照
1. 需求梳理完成并确认原型
2. 基础设施（代码规范、CI）就绪
3. UI 设计稿与组件库评审通过
4. 基础页面上线可浏览
5. 功能模块逐项验收
6. 测试覆盖率达标
7. 性能指标符合预期
8. 部署与监控打通
9. 首次发布并回收反馈

## 开发流程
1. **任务领取**：从 `docs/project-plan.md` 中选择当前阶段目标，拆分成可执行任务。
2. **需求确认**：在 Issue/任务卡中记录目标、验收标准与依赖。
3. **设计评审**：UI/交互变更先同步设计稿，必要时开评审会。
4. **实现开发**：遵循下面的编码规范与技术选型。
5. **自测验证**：确保 lint、test 通过，并进行功能冒烟。
6. **代码评审**：提交 PR，描述变更、测试结果、截图/录屏。
7. **集成部署**：合入后触发 CI/CD，观察监控，必要时回滚。

## 技术栈与约束
- 框架：Next.js 15+NestJS
- 语言：TypeScript、React 19
- UI：Ant Design 5、Tailwind CSS 4（或 PostCSS 实现原子化）
- 状态：React Context + SWR/React Query；必要时 Zustand
- 数据：Route Handlers 调用后端服务或 AI 接口
- 测试：Jest + React Testing Library、Playwright
- 部署：Vercel 首选，可备 Docker 方案

## 编码规范
- 严格类型定义，禁止 `any`。
- 组件使用函数式写法，合理拆分逻辑 Hook。
- 样式优先使用 CSS 变量、Ant Design Token，避免内联硬编码。
- 遵循 ESLint/Prettier 配置；提交前必须 `lint` + `test`。
- 文件命名：组件 `PascalCase.tsx`，工具函数 `camelCase.ts`。

## 测试要求
- 单元测试覆盖核心业务逻辑与边界条件。
- 组件测试验证渲染、交互、状态流转。
- 端到端测试覆盖主流程（登录、课程查看、AI 对话）。
- 每个 PR 附上测试命令输出。

## 性能与可访问性
- 首屏 LCP < 2.5s（桌面），CLS < 0.1。
- 组件按需加载，避免阻塞脚本。
- 图片使用 Next Image，开启懒加载。
- 满足 WCAG AA 基本要求（对比度、语义标签、键盘导航）。

## 监控与日志
- 引入 Sentry 跟踪前端错误。
- 接入 Logtail/自建 ELK 收集关键日志。
- 配置性能监控（Web Vitals、Lighthouse CI）。

## 文档与交付
- 更新 `docs/` 下相关文档，保持计划、接口、组件说明同步。
- 每个阶段结束提交阶段总结：完成项、问题、风险与下一步。
- 维护变更日志（Changelog），标注版本与亮点。

## 复查清单（PR 前）
- [ ] 需求与验收标准已满足
- [ ] Lint、测试全部通过
- [ ] 样式在暗色主题下对齐设计
- [ ] 新增依赖已审查并锁定版本
- [ ] 文档、注释、截图已更新
- [ ] 自测无性能与可访问性回退
